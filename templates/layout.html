<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
    {% block title %}
    {% endblock %}
    </title>
    <!-- HEAD: before bootstrap CSS -->
    <script>
      (function(){
        try {
          const t = localStorage.getItem('theme'); // 'light' | 'dark' | null
          if (t === 'dark') {
            document.documentElement.setAttribute('data-bs-theme','dark');
          } else {
            document.documentElement.removeAttribute('data-bs-theme');
          }
        } catch(e){}
      })();
    </script>

    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css')}}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="icon" href="{{ url_for('static', filename='favicon.png') }}">
</head>
<body>
    <!-- NAVBAR -->
<nav class="navbar" style="background-color: rgb(99, 199, 166);">
  <div class="container-fluid">

    <!-- Brand -->
    <a class="navbar-brand d-flex align-items-center gap-3" href="/" style="font-size: 40px;">
      <img src="{{ url_for('static', filename='logo.png') }}" width="80" height="80">
      P€rsonal £inance Track€r
    </a>

    <!-- Toggle Button ON RIGHT -->
    <button class="navbar-toggler ms-auto" type="button" 
            data-bs-toggle="offcanvas" data-bs-target="#offcanvasMenu"
            aria-controls="offcanvasMenu">
      <span class="navbar-toggler-icon"></span>
    </button>

  </div>
  <div class="dropdown" style="margin-left:1100px;">
      <button class="btn btn-sm btn-outline-secondary dropdown-toggle" id="themeDropdown" data-bs-toggle="dropdown" aria-expanded="false">
        Theme
      </button>
      <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="themeDropdown">
        <li>
          <button class="dropdown-item" id="theme-light">Light</button>
        </li>
        <li>
          <button class="dropdown-item" id="theme-dark">Dark</button>
        </li>
      </ul>
    </div>
</nav>

<!-- RIGHT SIDE MENU -->
<div class="offcanvas offcanvas-end text-bg-dark" tabindex="-1" id="offcanvasMenu">

  <div class="offcanvas-header">
    <h5 class="offcanvas-title">Menu</h5>
    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"></button>
  </div>

  <div class="offcanvas-body">
    <a href="/transactions" class="d-block text-white py-2">Transactions</a>
    <a href="/categories" class="d-block text-white py-2">Categories</a>
    <a href="/charts" class="d-block text-white py-2">Charts</a>
    <a href="/bills" class="d-block text-white py-2">Add bills</a>
    <a href="/logout" class="d-block text-white py-2">Log Out</a>
  </div>

</div>



    {% block body %}

    {% endblock %}


    <script>
    (function(){
      const root = document.documentElement;
      const btnLight = document.getElementById('theme-light');
      const btnDark  = document.getElementById('theme-dark');

      function applyTheme(t) {
        if (t === 'dark') {
          root.setAttribute('data-bs-theme','dark');
        } else {
          root.removeAttribute('data-bs-theme');
        }
        try { localStorage.setItem('theme', t); } catch(e){}
      }

      btnLight?.addEventListener('click', (e) => {
        e.preventDefault();
        applyTheme('light');
      });

      btnDark?.addEventListener('click', (e) => {
        e.preventDefault();
        applyTheme('dark');
      });
    })();
    </script>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
</body>
</html>